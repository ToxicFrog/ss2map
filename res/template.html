<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8">
    <title>System Shock 2 Map Viewer</title>
    <style>
      html, body {
        margin: 0;
        border: 0;
        padding: 0;
        height: 100vh;
        overflow: hidden;
      }
      .search-result {
        cursor: pointer;
      }
      .search-result:hover {
        color: #FF00FF;
      }
      div#layercontrols {
        column-count: 2;
      }
      div#map {
        /* position: absolute; */
        margin: 0;
        border: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
      div#map img {
        width: 100%;
        height: 100%;
      }
      td#mapcell {
        height: 100%;
        width: 50%;
        background: black;
      }
      table.toplevel {
        margin: 0; border: 0; padding: 0;
      }
      div.search-container {
        overflow: auto;
        height: 90vh;
        width: 100%;
      }
      table#search-results {
        height: fit-content;
        /* overflow: scroll; */
      }
      th {
        vertical-align: top;
      }
    </style>
    <script>
      var DEFAULT = ${DEFAULT_LEVEL}
      var levels = {${ALL_LEVELS}}
      var SCALE = 16  // Pixels per map tile
    </script>
    <script src="./kinetic.js"></script>
    <script src="./render.js"></script>
    <script src="./ui.js"></script>
    <script src="./categories.js"></script>
    <script src="./init.js"></script>
  </head>
  <body bgcolor="#202020" text="#B0B0B0">
    <table width="100%" height="100%" style="table-layout: fixed" class="toplevel">
      <tr>
        <td width="25%" valign="top"><!-- Left sidebar -->

          <select id="levelselect" onchange="changeLevel();" value="0">
            ${LEVEL_SELECT}
          </select>
          <select id="terraintype" onchange="changeTerrainType();" value="outline">
            <option value="outline">Outline</option>
            <option value="detail">Detail</option>
          </select>
          <a id="mislist_download" href="missing.txt">mislist</a>
          <hr>
          <div id="layercontrols">
          </div>
          <div style="text-align: center;">
            <button onclick="showAllLayers(false);">Hide All</button>
            <button onclick="showAllLayers(true);">Show All</button>
          </div>
          <hr>
          <div id="info" style="height: 100%;"></div>

          <div style="position: fixed; bottom: 0;">
            Generated by <a href="https://github.com/toxicfrog/ss2map/">ss2map</a>
          </div>

        </td>
        <td id="mapcell"><!-- Central map -->
          <!-- <div id="map"><img src="./loading.png" width="1024px" height="1024px"></div> -->
          <div id="map"><img src="./loading.png"></div>
        </td>
        <td width="25%" valign="top"><!-- Right sidebar -->
          <form onsubmit="return false;">
            <input type="text" id="search-text" style="width: 95%;"><br>
            <button type="reset" onclick="clearSearch();">Clear Results</button>
            <button type="submit" onclick="performSearch(false);">Search Level</button>
            <button type="button" onclick="performSearch(true);">Search All</button>
          </form>
          <hr>
          <div class="search-container">
            <table id="search-results">
              <tr>
                <th>Lv</th>
                <th style="text-align: left">Name</th>
              </tr>
            </table>
          </div>
        </td>
      </tr>
    </table>
  </body>
</html>
